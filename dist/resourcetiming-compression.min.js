!function(t){"use strict";var e,n;"undefined"!=typeof t&&(e=t,n=e.ResourceTimingCompression);var r={};r.noConflict=function(){return e.ResourceTimingCompression=n,r},r.INITIATOR_TYPES={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5},r.convertToTrie=function(t){var e,n,r,i,o,a,c,s={};for(e in t)if(t.hasOwnProperty(e))for(r=t[e],i=e.split(""),a=s,n=0;n<i.length;n++)o=i[n],c=a[o],"undefined"==typeof c?a=a[o]=n===i.length-1?r:{}:"string"==typeof c?a=a[o]={"|":c}:n===i.length-1?a[o]["|"]=r:a=a[o];return s},r.optimizeTrie=function(t,e){var n,r,i,o=0;for(n in t)"object"==typeof t[n]&&(r=this.optimizeTrie(t[n],!1),r&&(delete t[n],n+=r.name,t[n]=r.value)),o++;return 1===o?e?(i={},i[n]=t[n],i):{name:n,value:t[n]}:e?t:!1},r.trimTiming=function(t,e){"number"!=typeof t&&(t=0),"number"!=typeof e&&(e=0);var n=Math.round(t),r=Math.round(e);return 0===n?0:n-r},r.getNavStartTime=function(t){var e=0;try{"performance"in t&&t.performance&&t.performance.timing&&t.performance.timing.navigationStart&&(e=t.performance.timing.navigationStart)}catch(n){}return e},r.findPerformanceEntriesForFrame=function(t,e,n){var r,i,o,a,c,s,m,d=[];if(o=this.getNavStartTime(t),t.frames)for(r=0;r<t.frames.length;r++)a=this.getNavStartTime(t.frames[r]),c=0,a>o&&(c=n+(a-o)),d=d.concat(this.findPerformanceEntriesForFrame(t.frames[r],!1,c));try{if(!("performance"in t&&t.performance&&t.performance.getEntriesByType))return d;e&&(i=t.performance.getEntriesByType("navigation"),i&&1===i.length?(s=i[0],d.push({name:t.location.href,startTime:0,redirectStart:s.redirectStart,redirectEnd:s.redirectEnd,fetchStart:s.fetchStart,domainLookupStart:s.domainLookupStart,domainLookupEnd:s.domainLookupEnd,connectStart:s.connectStart,secureConnectionStart:s.secureConnectionStart,connectEnd:s.connectEnd,requestStart:s.requestStart,responseStart:s.responseStart,responseEnd:s.responseEnd})):t.performance.timing&&(m=t.performance.timing,d.push({name:t.location.href,startTime:0,redirectStart:m.redirectStart?m.redirectStart-m.navigationStart:0,redirectEnd:m.redirectEnd?m.redirectEnd-m.navigationStart:0,fetchStart:m.fetchStart?m.fetchStart-m.navigationStart:0,domainLookupStart:m.domainLookupStart?m.domainLookupStart-m.navigationStart:0,domainLookupEnd:m.domainLookupEnd?m.domainLookupEnd-m.navigationStart:0,connectStart:m.connectStart?m.connectStart-m.navigationStart:0,secureConnectionStart:m.secureConnectionStart?m.secureConnectionStart-m.navigationStart:0,connectEnd:m.connectEnd?m.connectEnd-m.navigationStart:0,requestStart:m.requestStart?m.requestStart-m.navigationStart:0,responseStart:m.responseStart?m.responseStart-m.navigationStart:0,responseEnd:m.responseEnd?m.responseEnd-m.navigationStart:0})));var u=t.performance.getEntriesByType("resource"),p=[];for(r=0;u&&r<u.length;r++)m=u[r],p.push({name:m.name,initiatorType:m.initiatorType,startTime:m.startTime+n,redirectStart:m.redirectStart?m.redirectStart+n:0,redirectEnd:m.redirectEnd?m.redirectEnd+n:0,fetchStart:m.fetchStart?m.fetchStart+n:0,domainLookupStart:m.domainLookupStart?m.domainLookupStart+n:0,domainLookupEnd:m.domainLookupEnd?m.domainLookupEnd+n:0,connectStart:m.connectStart?m.connectStart+n:0,secureConnectionStart:m.secureConnectionStart?m.secureConnectionStart+n:0,connectEnd:m.connectEnd?m.connectEnd+n:0,requestStart:m.requestStart?m.requestStart+n:0,responseStart:m.responseStart?m.responseStart+n:0,responseEnd:m.responseEnd?m.responseEnd+n:0});d=d.concat(p)}catch(S){return d}return d},r.toBase36=function(t){return"number"==typeof t?t.toString(36):""},r.getResourceTiming=function(){var e,n,r,i,o,a=this.findPerformanceEntriesForFrame(t,!0,0),c={};if(!a||!a.length)return[];for(e=0;e<a.length;e++)n=a[e],0!==n.name.indexOf("about:")&&0!==n.name.indexOf("javascript:")&&(r=this.INITIATOR_TYPES[n.initiatorType],"undefined"==typeof r&&(r=0),o=r+[this.trimTiming(n.startTime,0),this.trimTiming(n.responseEnd,n.startTime),this.trimTiming(n.responseStart,n.startTime),this.trimTiming(n.requestStart,n.startTime),this.trimTiming(n.connectEnd,n.startTime),this.trimTiming(n.secureConnectionStart,n.startTime),this.trimTiming(n.connectStart,n.startTime),this.trimTiming(n.domainLookupEnd,n.startTime),this.trimTiming(n.domainLookupStart,n.startTime),this.trimTiming(n.redirectEnd,n.startTime),this.trimTiming(n.redirectStart,n.startTime)].map(this.toBase36).join(",").replace(/,+$/,""),i=n.name,void 0!==c[i]?c[i]+="|"+o:c[i]=o);return this.optimizeTrie(this.convertToTrie(c),!0)},"function"==typeof define&&define.amd?define([],function(){return r}):"undefined"!=typeof module&&module.exports?module.exports=r:"undefined"!=typeof e&&(e.ResourceTimingCompression=r)}("undefined"!=typeof window?window:void 0);